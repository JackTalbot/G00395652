<!DOCTYPE html>
<html lang="en">

<head>
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Products</title>
        <link rel="stylesheet" href="/css/navbar.css">
        <link rel="stylesheet" href="/css/products.css">

        <!-- Styling for the table -->
        <style>
            table {
                border-collapse: collapse;
                width: 100%;
                color: #d96459;
                font-family: monospace;
                font-size: 25px;
                text-align: left;
            }

            table,
            th,
            td {
                border: 1px solid black;
                padding: 5px;
            }

            th,
            td {
                padding: 15px;
            }

            th {
                background-color: white;
            }
        </style>
    </head>

    <body>
        <!-- Include the navbar -->
        <%include ../navbar/navbar.ejs %>

        <h1>Products:</h1>

        <!-- Table to display the products -->
        <table>
            <thread>
                <tr>
                    <th>Product ID</th>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Actions</th>
                </tr>
            </thread>

            <tbody>
                <!-- Loop through the products and display each product in a row -->
                <% products.forEach(product=> { %>
                <tr>
                    <td>
                        <%= product.pid %>
                    </td>
                    <td>
                        <%= product.productdesc %>
                    </td>
                    <td>
                        <%= product.sid || 'N/A' %>
                    </td>
                    <td>
                        <%= product.location || 'N/A' %>
                    </td>
                    <td>
                        <%= product.price ? product.price.toFixed(2) : 'N/A' %>
                    </td>
                    <td>
                        <% if (!product.sid) { %>
                        <!-- Delete button for products without a sid -->
                        <a class="btn btn-danger" href="/products/delete/<%= product.pid %>"
                            onclick="return confirm('Are you sure you want to delete this product?');">Delete</a>
                        <% } else { %>
                        <!-- Display a message for products with a sid -->
                        <span>Not deletable</span>
                        <% } %>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </body>

    </html>
    </tbody>
</body>
</html>